{
    "contents" : "if (require(survey) == FALSE) \n  {\n    install.packages(\"survey\")\n    library(survey)\n  }\n'if(require(sas7bdat) == FALSE)\n{\n  install.packages(\"sas7bdat\")\n}\nlibrary(survey)\nlibrary(sas7bdat)'\n\n# import SAS data set\n\nload(\"chs2011.rdataframe\")\n\n# When SAS data imported directly, required 2 times going through the \n# following code to recode new variables correctly -- some values that were  \n# supposed to have been coded as 1 came up as NA, vice versa, 0 as NA, vice versa.\n# After saving as an R object and then reloaded in a new session, this problem\n# disappeared.\n\n# code lgb as binary factor variable\nchs2011$lgb[chs2011$sexualid == 2 & !is.na(chs2011$sexualid)] <- 1\nchs2011$lgb[chs2011$sexualid == 3 & !is.na(chs2011$sexualid)] <- 1\nchs2011$lgb[chs2011$msm == 1 & !is.na(chs2011$msm)] <- 1\nchs2011$lgb[chs2011$wsw == 1 & !is.na(chs2011$wsw)] <- 1\nchs2011$lgb[chs2011$sexualid == 1 & !is.na(chs2011$sexualid)] <- 0\n# R doesn't read '.d' & '.r' values from SAS data. Encode them as 'NA'.\nchs2011$lgb[is.na(chs2011$sexualid)] <- NA\n\nchs2011$lgb <- factor(chs2011$lgb)\n\n#recode didntgetcare as binary\nchs2011$nocare[chs2011$didntgetcare11 == 2] <- 1\nchs2011$nocare[chs2011$didntgetcare11 == 1] <- 0\nchs2011$nocare[chs2011$didntgetcare11 == NaN] <- NA\nchs2011$nocare <- factor(chs2011$nocare)\n#recode povgroup3\nchs2011$povrec <- chs2011$povgroup3\nchs2011$povrec[chs2011$povgroup3 == 4] <- NA\nchs2011$povrec <- factor(chs2011$povrec)\n#recode generalhealth\nchs2011$healthrec[chs2011$generalhealth < 4] <- 0\nchs2011$healthrec[chs2011$generalhealth >= 4] <- 1\nchs2011$healthrec <- factor(chs2011$healthrec)\n\n# MENTAL HEALTH VARIABLES\n# recode kessler variables\nchs2011$kesslerbin[chs2011$k6_12m >= 13] <- 0\nchs2011$kesslerbin[chs2011$k6_12m < 13] <- 1\nchs2011$kesslerbin <- factor(chs2011$kesslerbin)\n\n#create binary variable for received MH treatment past yr\nchs2011$mhtbin[chs2011$pastyrmht == 1 & !is.na(chs2011$pastyrmht)] <- 0\nchs2011$mhtbin[chs2011$pastyrmht >= 2 & !is.na(chs2011$pastyrmht)] <- 1\nchs2011$mhtbin <- factor(chs2011$mhtbin)\n\n#create composite variable for kesslerbin >= 13 but no MH trtmt\n\nchs2011$nohm[chs2011$mhtbin == 0] <- 1\nchs2011$nohm[is.na(chs2011$mhtbin)] < 0\nchs2011$nohm <- factor(chs2011$nohm)\n\n\n# reorder factor variables to specify reference values for regression\n\n# encode survey design factors\nchsdesign <- svydesign(id=~1,strata=strata,weights=\n                         wt12_dual,variables=chs2011,data=chs2011)\n\n# crude regressions for physical health\nnocare_lgb <- svyglm(nocare~lgb,design=chsdesign,family=quasibinomial)\nnocare_insured <- svyglm(nocare~insured,design=chsdesign,family=quasibinomial)\nnocare_povrec <- svyglm(nocare~povrec,design=chsdesign,family=quasibinomial)\nnocare_newrace <- svyglm(nocare~newrace,design=chsdesign,family=quasibinomial)\nnocare_sex <- svyglm(nocare~sex,design=chsdesign,family=quasibinomial)\n\n  ## regression on healthrec with 1 and 0 as reference variable\n  chs2011$healthrec <- factor(healthrec, levels=c(\"0\",\"1\"))\n  nocare_healthrec_ref0 <- svyglm(nocare~healthrec,design=chsdesign,family=quasibinomial)\n  chs2011$healthrec <- factor(healthrec, levels=c(\"1\",\"0\"))\n  nocare_healthrec1_ref1 <- svyglm(nocare~healthrec,design=chsdesign,family=quasibinomial)\n\n  ## regression on agegroup with 1 and 4 as reference variables\n  chs2011$agegroup <- factor(agegroup, levels=c(\"1\",\"2\",\"3\",\"4\"))\n  nocare_agegroup_ref1 <- svyglm(nocare~agegroup,design=chsdesign,family=quasibinomial)\n  chs2011$agegroup <- factor(agegroup, levels=c(\"4\",\"3\",\"2\",\"1\"))\n  nocare_agegroup_ref4 <- svyglm(nocare~agegroup,design=chsdesign,family=quasibinomial)\n  \n  ## regression on borough with \"Manhattan\" as reference variable (I think 3 is Manhattan)\n  chs2011$borough <- factor(borough, levels=c(\"3\",\"1\",\"2\",\"4\",\"5\"))\n  nocare_borough <- svyglm(nocare~borough,design=chsdesign,family=quasibinomial)\n\n\ndetach(chs2011)",
    "created" : 1442603213936.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1553670695",
    "id" : "F4D10B92",
    "lastKnownWriteTime" : 1442598976,
    "path" : "C:/Users/arenson/Google Drive/NYC CHS Healtcare Access Project/SAS/FinnCode (2).R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "type" : "r_source"
}